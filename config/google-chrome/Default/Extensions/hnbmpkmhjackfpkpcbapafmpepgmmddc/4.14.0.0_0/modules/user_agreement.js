class UserAgreement{constructor(a11yHelper){this._a11yHelper=a11yHelper;this._launchWebcamCallback=null;this._isDataAgreementOnly=false;this._hlProctoringHeadingElement=null;this._hlProctoringMainElement=null;this._hlProctoringStartButtonElement=null;this._hlAgreementContainerElement=null;this._hlAgreementButtonElement=null;this._hlAgreementTermsCheckboxElement=null;this._hlAgreementPrivacyCheckboxElement=null;this._hlAgreementButtonElement=null;this._hlAgreementErrorMessageElement=null;this._translations=null}init(launchWebcamCallback,isDataAgreementOnly=false){if("function"!==typeof launchWebcamCallback){void 0;return}if("object"!==typeof this._a11yHelper){void 0;return}this._launchWebcamCallback=launchWebcamCallback;this._isDataAgreementOnly=isDataAgreementOnly;this._hlProctoringHeadingElement=document.getElementById("hl-proctoring-info-heading");this._hlProctoringMainElement=document.getElementById("hl-proctoring-info-main");this._hlAgreementContainerElement=document.getElementById("hl-proctoring-agreement");this._hlAgreementButtonElement=document.getElementById("hl-acknowledge-agreement-button");this._hlAgreementTermsCheckboxElement=document.getElementById("hl-agreement-acknowledgement-terms");this._hlAgreementPrivacyCheckboxElement=document.getElementById("hl-agreement-acknowledgement-privacy");this._setupEventListeners()}setTranslations(translations){this._translations=translations}_setupEventListeners(){this._setupCheckboxEventListeners();this._setupAgreementButtonListeners()}_setupCheckboxEventListeners(){if(this._hlAgreementTermsCheckboxElement&&this._hlAgreementPrivacyCheckboxElement){const checkboxElements=[this._hlAgreementTermsCheckboxElement,this._hlAgreementPrivacyCheckboxElement];checkboxElements.forEach((element=>{element.addEventListener("change",this._onCheckboxChangeHandler)}))}}_onCheckboxChangeHandler=event=>{event.preventDefault();this._toggleAgreementConfirmationButton(this._isUserAgreementChecked())};_setupAgreementButtonListeners(){this._a11yHelper.setupAccessibleClickEventListener("hlAgreementButtonHandler",this._hlAgreementButtonElement,this._onAgreementButtonClickHandler)}_onAgreementButtonClickHandler=event=>{event.preventDefault();if(this._isUserAgreementChecked()){if(this._isDataAgreementOnly){this._hlAgreementButtonElement.innerText=this._translations.student_init.agreement.one_moment;this._hlAgreementButtonElement.classList.add("btn-waiting");this._launchWebcamCallback();return}this._showExamGuidelines();return}this._showAcknowledgementError()};_setupProctoringStartButtonListeners(){this._a11yHelper.setupAccessibleClickEventListener("hlProctoringStartButtonHandler",this._hlProctoringStartButtonElement,this._onProctoringStartButtonClickHandler)}_detachProctoringStartButtonListeners(){this._a11yHelper.detachAccessibleClickEventListener("hlProctoringStartButtonHandler",this._hlProctoringStartButtonElement,this._onProctoringStartButtonClickHandler)}_onProctoringStartButtonClickHandler=event=>{event.preventDefault();if(this._isUserAgreementChecked()){this._hlProctoringStartButtonElement.innerText=this._translations.student_init.agreement.one_moment;this._hlProctoringStartButtonElement.classList.add("btn-waiting");this._launchWebcamCallback();return}this._showAcknowledgementMessage();this._showAcknowledgementError()};_isUserAgreementChecked(){return this._hlAgreementTermsCheckboxElement.checked&&this._hlAgreementPrivacyCheckboxElement.checked}_toggleAgreementConfirmationButton(isActive){this._hlAgreementButtonElement.disabled=!isActive}_showAcknowledgementMessage(){this._hlProctoringHeadingElement.innerText=this._translations.student_init.proctoring_info.data_collection_title;this._hlAgreementContainerElement.style.display="block";this._hlProctoringMainElement.style.display="none";if(this._hlProctoringStartButtonElement){this._detachProctoringStartButtonListeners();this._hlProctoringStartButtonElement.remove();this._hlProctoringStartButtonElement=null}}_showExamGuidelines(){this._hlProctoringHeadingElement.innerText=this._translations.student_init.guidelines.title;this._hlAgreementContainerElement.style.display="none";this._hlProctoringMainElement.style.display="block";if(!this._hlProctoringStartButtonElement){this._hlProctoringStartButtonElement=document.createElement("button");this._hlProctoringStartButtonElement.classList.add("hl-proctoring-info-launch","hl-proctoring-button");this._hlProctoringStartButtonElement.id="launch-proctoring";this._hlProctoringStartButtonElement.innerText=this._translations.student_init.agreement.launch_proctoring}this._hlProctoringMainElement.appendChild(this._hlProctoringStartButtonElement);this._setupProctoringStartButtonListeners()}_showAcknowledgementError(){if(!this._hlAgreementErrorMessageElement){const errorMessageElement=document.createElement("p");errorMessageElement.innerText=this._translations.student_init.agreement.validation.terms_privacy;errorMessageElement.classList.add("hl-proctoring-content","hl-proctoring-agreement-error");this._hlAgreementErrorMessageElement=errorMessageElement}this._hlAgreementContainerElement.appendChild(this._hlAgreementErrorMessageElement)}}if(window.hasOwnProperty("hlA11yHelper"))globalThis.hlUserAgreement=new UserAgreement(hlA11yHelper);