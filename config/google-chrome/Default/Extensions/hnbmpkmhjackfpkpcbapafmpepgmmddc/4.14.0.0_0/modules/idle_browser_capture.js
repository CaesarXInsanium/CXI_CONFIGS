class IdleBrowserCapture{_maxIdleSeconds=3;_idleStatusInterval;_currentlyIdleSeconds=0;_resetIdleStatusListeners=["load","mousemove","mousedown","touchstart","click","keypress"];_eventHandlersMemo={};_hlAlert;_translations;constructor(hlAlert){this._hlAlert=hlAlert}init({translations:translations}){if(!this._hlAlert){void 0;return}if(!translations){void 0;return}this._translations=translations;this._setupChromeEventListeners()}_startIdleBrowserCapture(){this._resetIdleStatusListeners.forEach((listener=>{window.addEventListener(listener,this._resetIdleStatus(`resetIdleStatusEvent-${listener}`))}));this._idleStatusInterval=setInterval(this._trackIdleSeconds,1e3)}_trackIdleSeconds=()=>{this._currentlyIdleSeconds+=1;if(this._currentlyIdleSeconds===this._maxIdleSeconds)this._hlAlert.showAlert("high",this._translations.idle_browser,null,{timeout:null})};_resetIdleStatus=memoIndex=>this._eventHandlersMemo[memoIndex]||(this._eventHandlersMemo[memoIndex]=()=>{this._handleResetIdleStatus(memoIndex)});_handleResetIdleStatus=memoIndex=>{if(!document.hasFocus())return;clearTimeout(this._idleStatusInterval);this._currentlyIdleSeconds=0;chrome.runtime.sendMessage({message:"stop_idle_browser_capture",type:"browser_guard"});this._resetIdleStatusListeners.forEach((listener=>{window.removeEventListener(listener,this._resetIdleStatus(`resetIdleStatusEvent-${listener}`))}))};_setupChromeEventListeners(){chrome.extension.onMessage.addListener((request=>{const listenerHandlers={start_idle_browser_capture:()=>{this._startIdleBrowserCapture()}};if(listenerHandlers[request.action])listenerHandlers[request.action]()}))}}globalThis.hlIdleBrowserCapture=new IdleBrowserCapture(hlAlert);