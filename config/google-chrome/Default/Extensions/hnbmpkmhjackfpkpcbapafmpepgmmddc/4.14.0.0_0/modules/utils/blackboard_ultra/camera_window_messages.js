globalThis.cameraWindowMessages=async function(msg,sender,sendResponse){if(document.querySelector("iframe.classic-learn-iframe"))return;switch(msg.action){case"test_ready":case"display_count":chrome.storage.local.set({display_count:msg.data});break;case"show_exam_webcam":insertExamTools();break;case"checklist_complete":document.getElementById("lti-launch-iframe").contentWindow.postMessage({checklistComplete:true},"*");if(await getActiveLmsExamId()&&startExamPending&&!examWasStarted){examWasStarted=true;startExamPending=false;waitForFirstQuestion(initializeExam)}chrome.runtime.sendMessage({message:"focus_page"});break;case"relaunch_webcam":relaunchWebCamera();chrome.runtime.sendMessage({message:"focus_page"});if(!!msg.test&&1===msg.test)chrome.storage.local.get(null,(storage=>{insertLiveChat(storage.lms_student_name,storage.student_id,storage.exam_id,storage.school_code)}));break;case"focus_test":chrome.runtime.sendMessage({message:"focus_page"});break}};chrome.extension.onMessage.addListener(cameraWindowMessages);