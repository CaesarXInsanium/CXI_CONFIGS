var env={};var student_id,session_id,exam_id;let launch_screen;let translations;$(document).ready((function(){detectPage()}));function detectPage(){let pagecount=0;let page_identified=null;let current_page=window.location.href;if(window.self!==window.top){let quiz_inside=/\bd2l\/lms\/quizzing\/user\/quiz_summary\.d2l\b/i.test(current_page);let quiz_is_learning=/\bd2l_body_type=\b/i.test(current_page);if(quiz_inside&&quiz_is_learning){var urlPartsx=current_page.split("?");var paramsx=new URLSearchParams(urlPartsx[1]);paramsx.delete("cfql");paramsx.delete("dnb");paramsx.delete("d2l_body_type");paramsx.delete("contentTopicId");var newUrl=urlPartsx[0]+"?"+paramsx.toString();window.top.location.href=newUrl}}let page_identifiers={quiz_password:/\bd2l\/lms\/quizzing\/user\/quiz_summary\.d2l\b/i.test(current_page),quiz_question:/\bd2l\/lms\/quizzing\/user\/attempt\/quiz_start_frame\.d2l\b/i.test(current_page),quiz_question:/\bd2l\/lms\/quizzing\/user\/attempt\/quiz_start_frame_auto\.d2l\b/i.test(current_page)};$.each(page_identifiers,(function(key,value){if(value){page_identified=key;pagecount++}}));if(1===pagecount)applyPageLogic(page_identified);function applyPageLogic(page){switch(page){case"quiz_password":applyLaunchLogic();break;case"quiz_question":applyQuestionLogic();break;default:void 0}}}chrome.extension.onMessage.addListener((function(msg,sender,sendResponse){if("webcam_open"==msg.action)webcamOpenMessage();else if("display_count"==msg.action)env.display_count=msg.data;else if("relaunch_webcam"===msg.action){relaunchFlow();chrome.runtime.sendMessage({message:"focus_page"})}else if("focus_test"===msg.action)chrome.runtime.sendMessage({message:"focus_page"});else if("show_frame"===msg.action)showHLFrame();else if("send_chat"===msg.action)sendLivechatMsg(msg.message);else if("showcalculator"===msg.action||"showcalculatorsci"===msg.action){const calculatorType="showcalculator"===msg.action?"basic":"scientific";showCalculator(calculatorType)}else if("opencalculator"===msg.action||"opencalculatorsci"===msg.action)toggleCalculator(true);else if("hidecalculators"===msg.action)hideCalculators();else if("closecalculators"===msg.action)toggleCalculator(false,false);else if("open_support_chat"===msg.action){hlChat.destroy();hlChat.setGroupId(msg.group_id);hlChat.injectCode();hlChat.maximizeWindow()}else if("show_exam_webcam"===msg.action)insertExamTools(true);else if("showwebcam"===msg.action)toggleWebcamVisibilty(true);else if("hidewebcam"===msg.action)toggleWebcamVisibilty(false);else if("compresswebcam"===msg.action)toggleWebcamCompressed(true);else if("expandwebcam"===msg.action)toggleWebcamCompressed(false)}));function pauseAllTabs(reason,relaunch=false){chrome.runtime.sendMessage({message:"pause_all_tabs",reason:[reason],relaunch:relaunch})}function resumeAllTabs(){setTimeout((function(){chrome.runtime.sendMessage({message:"resume_all_tabs"})}),750)}function launchWebCamera(){if(1==env.bypass_status)requestAccessCode();else{chrome.runtime.sendMessage({message:"close_webcam",type:"launch"});env.relaunch=0;chrome.runtime.sendMessage({message:"webcam_launch",url:hl_url+"/webapp/camera",session_id:env.session_id,lms_id:4,relaunch:0,display_count:env.display_count,current_url:window.location.hostname})}}function relaunchWebCamera(){pauseAllTabs(translations.webcam.relaunch,true)}function questionChatCommands(){document.addEventListener("launchcam",(function(){launchWebCamera()}));document.addEventListener("relaunchcam",(function(){chrome.runtime.sendMessage({message:"webcam_launch",url:hl_url+"/webapp/camera",session_id:env.session_id,lms_id:4,relaunch:1,display_count:env.display_count,current_url:window.location.hostname})}))}chrome.runtime.sendMessage({message:"exam_tab_id"});function applyLaunchLogic(){getEnvInfo((function(){if($(".d2l-button[primary]").length)studentInit()}));removeHLFrame();chrome.extension.onMessage.addListener((function(msg,sender,sendResponse){if("test_ready"==msg.action){submitAccessCode(msg.data);if(env.exam_toggles&&"1"==env.exam_toggles[17].value)chrome.runtime.sendMessage({message:"begin_fullscreen"})}else if("webcam_closed_begin"==msg.action){if("1"==env.exam_toggles[14].value)chrome.runtime.sendMessage({message:"disable_browser_guard"})}else if("webcam_restarted"===msg.action){if(env.exam_toggles&&"1"==env.exam_toggles[17]["value"])chrome.runtime.sendMessage({message:"begin_fullscreen"})}else if("checklist_complete"==msg.action){var data={lms_id:4,exam_id:env.exam_id,student_id:env.student_id,session_id:env.session_id,exam_name:env.exam_name,school_code:env.school_code};sendResponse(data)}}));function studentInit(){displayLoader();var attempt=1;$("td.fct_w > label").each((function(index){if($(this).text().includes(", Completed")){var att_info=$(this).text();attempt=parseInt(att_info.substring(att_info.lastIndexOf("-")+1))+1}}));var billable=$('button[title="Admin Tools"]').length?0:1;var data={lms_id:4,lms_school_id:window.location.origin,lms_exam_id:parseQuery("qi"),lms_student_id:env.UserId,lms_student_name:env.FirstName+" "+env.LastName,lms_student_first_name:env.FirstName,lms_student_last_name:env.LastName,current_attempt:attempt,href:window.location.href,nav_user_agent:navigator.userAgent,billable:billable,ext_version:chrome.runtime.getManifest().version,browser_version:getChromeVersion()};chrome.runtime.sendMessage({message:"lms_init",data:data},(function(r){if(r.result){var response=r.response;if(1==response.status){env.exam_id=response.exam_id;env.student_id=response.student_id;env.session_id=response.session_id;env.bypass_status=response.bypass_status;env.exam_toggles=response.exam_toggles;env.exam_name=response.exam_name;env.exam_instructions=response.exam_instructions;launch_screen=response.launch_screen;translations=response.translations;if(env.exam_toggles)if(void 0==env.exam_toggles[28])env.exam_toggles[28]={id:28,value:"0"};if(1===env.bypass_status)requestAccessCode();else{displayLaunchUI();insertLiveChat(env.FirstName+" "+env.LastName,env.student_id,env.exam_id,response.school_code);questionChatCommands();if(env.exam_toggles&&"1"==env.exam_toggles[12]["value"])chrome.runtime.sendMessage({message:"display_count"})}}else showAccessCode()}else{env.student_id="";env.session_id="";showAccessCode()}}));function displayLoader(){$("div#d_content_r_c1").append('<div id="hl-loader"><p>Loading</p><div class="hl-bounce1"></div><div class="hl-bounce2"></div><div class="hl-bounce3"></div></div>');$("div#d_content_r_c2").hide();setTimeout((function(){if(!$("#hl-begin").length)showAccessCode()}),1e4)}function displayLaunchUI(){$("div#d_content_r_c1").prepend('<div id="hl-begin" class="hl-begin" style="position: relative; height: 275px; display: none;"></div>');$("#hl-begin").prepend(launch_screen);$(".hl-begin").fadeIn("slow");$("#hl-loader").remove();$("div.d2l-heading").append(`<div><button id="details-toggle" class="d2l-button" primary="primary">${translations.d2l.show_quiz_details}</button></div>`);$(".d2l-heading").css("position","relative");$("button#details-toggle").click((function(){$("button#details-toggle").text().indexOf("Show")>-1?$("button#details-toggle").text(translations.d2l.hide_quiz_details):$("button#details-toggle").text(translations.d2l.show_quiz_details);$("div#d_content_r_c2, div#chat-spacer").slideToggle()}));$("label#z_p").next().next().hide();$("div.d2l-floating-buttons-container").hide();$('input#z_q[type="password"]').closest("table").hide();$('input#z_q[type="password"]').closest("table").prev("h2.dhdg_1").hide();insertSidebar("launch");hlUserAgreement.init(launchWebCamera);hlUserAgreement.setTranslations(translations);let blocked_content=$(".d2l-xspl-box").data("original-html");if(blocked_content&&blocked_content.includes("honorlock.com"))$(".d2l-xspl-box").replaceWith(blocked_content)}}function removeHLFrame(){waitForElement('iframe[src*="https://honorlock.com"]',(function(s){if(s)$('iframe[src*="https://honorlock.com"], a.xspl-block-link').hide()}))}function showAccessCode(){$("div#d_content_r_c2").show();if($("#hl-loader").length)$("#hl-loader").remove()}}function showHLFrame(){$("#hl-begin").hide();$("#d_content > #hl-livechat").hide();$("div#d_content_r_c2").show();$('iframe[src*="https://honorlock.com"]').show()}function webcamOpenMessage(){$(".hl-begin-header").html(translations.authentication.begin_header);$("#hl-begin-instructions").html(translations.d2l.begin_instructions);$("#relaunch-proctoring").click((function(){$(this).css("color","#540baf");launchWebCamera()}))}function submitAccessCode(exam_access_code){exam_access_code=exam_access_code.substring(0,exam_access_code.length-2);let password_fields=Array.from(document.querySelectorAll('input[type="password"]'));password_fields.forEach((field=>{if("hl-pin"==field.id)return;field.setAttribute("value",exam_access_code);field.setAttribute("type","hidden");field.setAttribute("autocomplete","off")}));$('.d2l-button[primary][id!="details-toggle"]').trigger("click")}function relaunchFlow(){if(!$("div.dhdg_2",env.quiz_frame).length)return;relaunchWebCamera()}function applyQuestionLogic(){getEnvInfo((function(){$("iframe.d2l-navbar-margin").on("load",(function(){chrome.storage.local.get(null,(storage=>{if(!storage.exam_state||"submitted"==storage.exam_state)return;env.bypass_status=storage.bypass_status;env.exam_id=storage.exam_id;env.exam_toggles=storage.exam_toggles;env.student_id=storage.student_id;env.session_id=storage.session_id;env.school_code=storage.school_code;env.attempt=storage.student_attempt;student_id=storage.student_id;session_id=storage.session_id;exam_id=storage.exam_id;translations=storage.translations;initLoad();if("paused"==storage.exam_state)pauseAllTabs(storage.pause_reasons)}));$(this).off("load",arguments.callee)}))}));function initLoad(){var body_frame=$('iframe[name="content"]').contents();var quiz_frame=$('frame[name="pageFrame"]',body_frame).contents();var first_question=$("div.dhdg_2",quiz_frame).eq(0);env.body_frame=body_frame;env.quiz_frame=quiz_frame;if(!$("div.dhdg_2",env.quiz_frame).length)return;var info_frame=$('frame[name="infoFrame"]',env.body_frame).contents();var q_saved=parseInt($("label#z_d",info_frame).text()[0]);if(!q_saved)env.from_launch=true;function examOptionsSetup(){if(env.exam_toggles)if(void 0==env.exam_toggles[28])env.exam_toggles[28]={id:28,value:"0"};if(env.bypass_status)return;insertSidebar("question");insertExamTools(false);if("object"===typeof hlIdleBrowserCapture)hlIdleBrowserCapture.init({translations:translations});chrome.runtime.sendMessage({message:"inject_shortcut_detection",type:"browser_guard"});insertLiveChat(env.FirstName+" "+env.LastName,env.student_id,env.exam_id,env.school_code);questionChatCommands();$('frame[name="pageFrame"]',env.body_frame).on("load",quizFrameLoad);trackExamClose();if(!!Number(env.exam_toggles[2]["value"])){elements=[$("body"),$('frame[name="headerFrame"]',env.body_frame).contents(),env.body_frame,env.quiz_frame];trackEvent(elements)}disablePrinter();chrome.runtime.sendMessage({message:"check_webcam"});if($("div.dhdg_2",env.quiz_frame).length>1){env.multiple_questions=true;answeredQuestionListener();env.relaunch_interval=setInterval((function(){chrome.runtime.sendMessage({message:"check_webcam"})}),3e4)}examProctorOptions()}examOptionsSetup();if(!env.multiple_questions)postLog("Load",first_question);function quizFrameLoad(){env.quiz_frame=$('frame[name="pageFrame"]',env.body_frame).contents();if($('form[action*="quiz_confirm_submit_auto.d2l"]',env.quiz_frame).length){$("button#z_d, button#z_f",env.quiz_frame).click((function(){postLog("Exam Submit");chrome.runtime.sendMessage({message:"close_webcam",type:"submit"});chrome.runtime.sendMessage({message:"disable_browser_guard"});$(window).off("beforeunload",env.unloadHandler);if(env.relaunch_interval)clearInterval(env.relaunch_interval)}));$('form[action*="quiz_confirm_submit.d2l"] > div',env.quiz_frame).css("margin-bottom","35px")}else if(!$("div.dhdg_2",env.quiz_frame).length);else{disablePrinter();if(!!Number(env.exam_toggles[2]["value"])){elements=[$("body"),$('frame[name="headerFrame"]',env.body_frame).contents(),env.body_frame,env.quiz_frame];trackEvent(elements)}chrome.runtime.sendMessage({message:"check_webcam"});if(env.multiple_questions)answeredQuestionListener();postLog("Load",$("div.dhdg_2",env.quiz_frame).eq(0))}}function answeredQuestionListener(){$("div.dhdg_2",env.quiz_frame).nextUntil("div").next().find("input").change((function(){var question_answered=$(this).closest("fieldset.block_disp").closest("div.dco").prevAll("div.dhdg_2:first");postLog("Load",question_answered)}))}function disablePrinter(){if(!!Number(env.exam_toggles[9]["value"])){$("head",env.quiz_frame).append("<style type='text/css'>@media print { body * { display: none !important;}}</style>");$("body").append("<style type='text/css'>@media print { #d2l_body { display: none !important;}}</style>")}}function examProctorOptions(){env.disable_page_actions="1"==env.exam_toggles[2]["value"]?true:false;if("1"==env.exam_toggles[12]["value"])chrome.runtime.sendMessage({message:"display_count"})}function trackExamClose(){var targetWin=window==window.parent?window.parent:window;targetWin.unloadHandler=function(){postLog("Exam Browser Closed");chrome.runtime.sendMessage({message:"exam_window_closed"});chrome.runtime.sendMessage({message:"close_webcam",type:"relaunch"})};$(window).on("beforeunload",targetWin.unloadHandler)}}function postLog(event_type,question=null){var question_body,question_text,question_html,question_num;if(question){question_body=question.nextUntil("div").next();question_text=question_body.find("div.d2l-htmlblock").eq(0).text().trim();question_html=question_body.find("div.d2l-htmlblock").eq(0).html();question_num=question.find("strong").text().trim()}if(!env.attempt){var header_frame=$('frame[name="headerFrame"]',env.body_frame).contents();var att_info=$("div.d2l-quiz-attempt-top-group",header_frame).text();env.attempt=parseInt(att_info.substring(att_info.lastIndexOf("Attempt ")+8))}var log_data={lms_id:4,event_type:event_type,question_num:question_num,question_text:question_text,question_html:question_html,school_identifier:window.location.origin,exam_identifier:parseQuery("qi"),student_identifier:env.UserId,user_name:env.FirstName+" "+env.LastName,current_attempt:env.attempt,came_from_launch:env.from_launch||false,location:window.location.href,hl_student_id:env.student_id};chrome.runtime.sendMessage({message:"lms_log",data:log_data})}function trackEvent(elements){if("undefined"!==typeof hlAlert)hlAlert.init();let eventsReadable={dragstart:translations.forbidden_events.dragstart,contextmenu:translations.forbidden_events.contextmenu,copy:translations.forbidden_events.copy,paste:translations.forbidden_events.paste,cut:translations.forbidden_events.cut};let eventsLogged={dragstart:"Drag and Drop",contextmenu:"Right Click",copy:"Copy",paste:"Paste",cut:"Cut"};elements.forEach((element=>{["contextmenu","dragstart","copy","paste","cut"].forEach((event=>{element.bind(event,(e=>{e.preventDefault();let capitalize=([firstLetter,...restOfWord])=>firstLetter.toUpperCase()+restOfWord.join("");let eventDisplayed=eventsReadable[event]?eventsReadable[event]:capitalize(event);if("undefined"!==typeof hlAlert)hlAlert.showAlert("exam",eventDisplayed,null,{timeout:3e3});var question=$(this).hasClass("dhdg_2")?$(this):$(this).prevUntil("div.dhdg_2").prev();postLog(eventsLogged[event],question)}))}))}))}}function requestAccessCode(bypass_set=1){var data={lms_id:1,exam_id:env.exam_id,session_id:env.session_id,exam_name:env.exam_name,school_code:env.school_code};chrome.runtime.sendMessage({message:"access_request",data:data,bypass_set:bypass_set});if(!bypass_set)$("input#hl-pin").prop("readonly",true)}function insertSidebar(page){const includeCalc=1===parseInt(env.exam_toggles[19]["value"])||1===parseInt(env.exam_toggles[28]["value"]);var menu_items={livechat:{id:"hl-livechat-link",icon:'<d2l-icon icon="d2l-tier2:discussions" class="x-scope d2l-icon-0"></d2l-icon>',title:translations.d2l.live_chat,action:void 0},guide:{id:"hl-guide",icon:'<d2l-icon icon="d2l-tier2:checklist" class="x-scope d2l-icon-0"></d2l-icon>',title:translations.guide,action:function(){chrome.runtime.sendMessage({message:"open_d2l_guide",lms_current_url:document.referrer})}},calculator:{id:"hl-calculator",icon:'<d2l-icon icon="d2l-tier2:calculate" class="x-scope d2l-icon-0"></d2l-icon>',title:translations.calculator,action:function(){toggleCalculator()}},accessibility:{id:"hl-accessibility",icon:'<d2l-icon icon="d2l-tier2:accelerator" class="x-scope d2l-icon-0"></d2l-icon>',title:translations.accessibility,action:function(){$("li#hl-accessibility-field").slideToggle()}}};var menu_options=[];var append_loc="";switch(page){case"launch":menu_options=["livechat","guide","accessibility"];append_loc="#hl-begin";break;case"question":menu_options=["livechat","calculator"];append_loc="#d_content_r_p";break}$("#hl-menu").remove();if("question"==page){$(append_loc).append(`<div id="hl-menu" class="question-page"><span class="menu-title">${translations.proctoring_support}:</span><ul class="hl-support-list"></ul></div>`);$("#hl-menu").parent().css("position","relative")}else $(append_loc).append(`<div id="hl-menu"><div class="menu-title"><span>${translations.proctoring_support}</span></div><ul class="hl-support-list"></ul></div>`);$.each(menu_options,(function(key,name){if(!name)return true;const $hlSupportList=$("ul.hl-support-list");const item=menu_items[name];$hlSupportList.append(`\n\t\t\t<li id="${item["id"]}" \n\t\t\t\t${"hl-calculator"===item["id"]&&!includeCalc?'style="display: none;"':""}\n\t\t\t>\n\t\t\t\t${item["icon"]}${item["title"]}\n\t\t\t</li>\n\t\t`);if(item["action"]&&"function"===typeof item["action"])$(`li#${item["id"]}`).on("click touchstart",item["action"]);if(item["title"]===translations.accessibility){$hlSupportList.append(`<li id="hl-accessibility-field"><div><span>${translations.accessibility_code_label}</span><input id="hl-pin" type="password" aria-label="${translations.accessibility_code_al}" maxlength=5></div></li>`);accessibilityPINListener()}}));$("#hl-menu").fadeIn("slow");function accessibilityPINListener(){$("#hl-pin").keyup((async function(){var pin_color="black";var pin_value=$(this).val();if(5==pin_value.length){const usat=await getUsat().finally((usat=>usat));$.ajax({url:hl_url+"/lms/bypasspincheck",beforeSend:function(xhr){xhr.setRequestHeader("Authorization","Bearer "+usat)},data:{pin:pin_value,student_id:env.student_id,lms_student_id:env.UserId,lms_student_name:env.FirstName+" "+env.LastName,ext_version:chrome.runtime.getManifest().version},type:"POST",async:false,success:function(response){if("1"==response)chrome.storage.local.set({bypass_status:1},(()=>{pin_color="green";env.bypass_status=1;requestAccessCode(0);chrome.runtime.sendMessage({message:"close_all_webcam_windows"})}));else if("2"==response)pin_color="orange";else pin_color="red"}}).fail((function(jQueryXHR,exception){pin_color="grey"}))}$("#hl-pin").css("color",pin_color)}))}}function getEnvInfo(callback){var s=$('script:contains("Global =")').html();var parse=s.substring(s.indexOf("{")+1,s.indexOf(",Language"));parse.split(",").forEach((function(e){var pair=e.split(":");if(2!==pair.length)return;env[pair[0]]=pair[1].replace(/[']+/g,"")}));callback()}function waitForElement(element,callback){let poll_interval=setInterval((function(){if($(element).length){clearInterval(poll_interval);poll_interval=null;if(callback&&"function"==typeof callback){callback(true);return true}}}),100);setTimeout((function(){if(poll_interval){callback(false);clearInterval(poll_interval)}}),7500)}function parseQuery(q){var params={};var query=decodeURI(window.location.search.substring(1));query.split("&").forEach((function(e){var pair=e.split("=");params[pair[0]]=pair[1]}));if(q&&void 0!=params[q])return params[q];return params}function getChromeVersion(){var raw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return raw?parseInt(raw[2],10):false}function showCalculator(calculatorType){$("#hl-calculator").show();if("object"===typeof hlExamTools)hlExamTools.proctorAddCalculatorToExam(calculatorType)}function toggleCalculator(setActiveState=null,forceFocus=true){if("object"===typeof hlExamTools)hlExamTools.toggleCalculator(setActiveState,forceFocus)}function hideCalculators(){$("#hl-calculator").hide();if("object"===typeof hlExamTools)hlExamTools.proctorRemoveCalculatorFromExam()}function adjustWebcamPositionForChat(isActive){if("object"===typeof hlExamTools)hlExamTools.adjustWebcamPositionForChat(isActive)}function toggleWebcamVisibilty(shouldBeVisible){if("object"===typeof hlExamTools)hlExamTools.toggleWebcam(shouldBeVisible)}function toggleWebcamCompressed(shouldBeCompressed){if("object"===typeof hlExamTools)hlExamTools.toggleWebcamCompressed(shouldBeCompressed)}function sendLivechatMsg(msg){$("head").append(`\n\t\t<script>\n\t\t\tLiveChatWidget.call('maximize')\n\t\t<\/script>\n    `)}function insertLiveChat(student_name,student_id,exam_id,school_code="Not provided"){const hlChatParameters={lmsSchoolId:school_code,examId:exam_id,studentId:student_id,lmsStudentName:student_name,lmsStudentEmail:student_name,license:livechat_license,withExamTools:true};hlChat.init(hlChatParameters);document.addEventListener("enableguard",(function(){chrome.storage.local.set({guardModeStatus:1});chrome.runtime.sendMessage({message:"enable_browser_guard"});chrome.runtime.sendMessage({message:"disable_new_tabs"});chrome.runtime.sendMessage({message:"begin_fullscreen"});chrome.runtime.sendMessage({message:"to_camera",msg:"enable_guard_camera"})}));document.addEventListener("focuschat",(function(){chrome.runtime.sendMessage({message:"focus_page"})}));document.addEventListener("cleanslate",(function(){chrome.storage.local.clear()}));document.addEventListener("disableguard",(function(){chrome.runtime.sendMessage({message:"disable_browser_guard"})}));document.addEventListener("opensesame",(function(){chrome.runtime.sendMessage({message:"bypass_payment"})}));document.addEventListener("nextstep",(function(){chrome.runtime.sendMessage({message:"livechat_command_nextstep"})}));document.addEventListener("cyclevideo",(function(){chrome.runtime.sendMessage({message:"cyclevideo"})}));document.addEventListener("exitfullscreen",(function(){chrome.runtime.sendMessage({message:"exit_fullscreen"});chrome.storage.local.set({fullscreen_override:1})}));document.addEventListener("showcalculator",(()=>showCalculator("basic")));document.addEventListener("showcalculatorsci",(()=>showCalculator("scientific")));document.addEventListener("hidecalculators",(()=>hideCalculators()));document.addEventListener("opencalculator",(()=>toggleCalculator(true)));document.addEventListener("opencalculatorsci",(()=>toggleCalculator(true)));document.addEventListener("closecalculators",(()=>toggleCalculator(false,false)));document.addEventListener("chat-started",(()=>adjustWebcamPositionForChat(true)));document.addEventListener("chat-ended",(()=>adjustWebcamPositionForChat(false)));document.addEventListener("showwebcam",(()=>toggleWebcamVisibilty(true)));document.addEventListener("hidewebcam",(()=>toggleWebcamVisibilty(false)));document.addEventListener("compresswebcam",(()=>toggleWebcamCompressed(true)));document.addEventListener("expandwebcam",(()=>toggleWebcamCompressed(false)))}function insertExamTools(isExamBegin){if("object"===typeof hlExamTools){const isExamUsingWebcam=1===parseInt(env.exam_toggles[1]["value"]);hlExamTools.init({environmentUrl:hl_url,activeLms:"d2l",isExamBegin:isExamBegin,isExamUsingWebcam:isExamUsingWebcam,translations:translations})}}